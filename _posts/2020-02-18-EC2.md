---
title: "EC2"
excerpt: "AWS EC2"
toc: true
toc_sticky: true
categories:
  - AWS
modified_date: 2020-04-14 09:36:28 +0900
---
## EC2 CheatSheet
### Features
- provides **scalable computing capacity**
- **EC2 instances** : Virtual computing environments
- **Amazon Machine Images(AMI)** : Preconfigured templates for EC2 instances
  - package the bits needed for the server (including the os and additional sw)
- **Instance types** : Various configurations of CPU, memory, storage, and networking capacity for your instances 
- **Key pairs** : Secure login information for your instances (public-private keys where private is kept by user)
- **Instance store volumes** : Storage volumes for temporary data. Deleted when you stop/terminate your instance
- **Elastic Block Store(EBS)** : Persistent storage volumes for data using
- **Regions and Availability Zones** : Multiple physical locations for your resources such as instances and EBS volumes
- **Security Groups** : A Firewall to specify the protocols, ports, and source IP ranges that can reach your instances 
- **Elastic IP(EIP)** : Static IP addresses
- **Tags** : Metadata. Created and assigned to EC2 resources.
- **VPCs** : Virtual networks that are logically isolated from the rest of the AWS cloud, and can optionally connect to on premises network


### Amazon Machine Image(AMI)
- **Template** from which EC2 instances can be launched quickly 
- **does NOT span across regions**, and needs to be copied 
- **can be shared with other specific AWS accounts or made public**


### Purchasing Option 
- **On-Demand Instances**
  - pay for instances and compute capacity that you use by the hour
  - with no long-term commitments or up-front payments 
- **Reserved Instances**
  - provides **lower hourly running costs** by providing a billing discount 
  - **capacity reservation**
  - suited if **consistent, heavy, predictable** usage 
  - you can **modify AZs** or the **instance size within the same instance type**
  - **pay for entire term** regardless of the usage
- **Spot Instance**
  - cost-effective choice but doest **NOT guarantee availability**
- **Dedicated Instances**
  - tenancy option which enables instances to run in VPC on hardware that's isolated, dedicated to a single customer

## EC2 Pricing Models 
  - On Demand 
  - Reserved : Standard, Convertible, Scheduled 
    - You can modify the AZ, scope, network platform, or instance size (within the same instance type), but not Region.
  - Spot : Like stock market. (if you terminate, you will be charged, if its terminated by EC2, you will NOT be charged.) 
  - Dedicated Hosts : Instance Types F I G H T D R M A R K F X Z A U  
## Feature
- Termination Protection is turned off by default 
- on EBS-backed instance, root EBS volume to be deleted when the instance terminated 
- you CAN encrypt EBS Root Volumes
- Additional EBS Volume also can be encrypted  
- Individual instances are **provisioned in Availablity Zones** 
- You **can add multiple EBS volumes** to an EC2 instance and then create your own **RAID 5/RAID 10/RAID 0** configurations using those volumes.
## Security Groups
   - All Inbound traffic blocked by default
   - All Outbound traffic is allowed
   - security group change takes immediately
   - you can have multiple security groups 
   - STATEFUL : if you open up port, it's going to be open for both inbound and outbound traffic(cf. NACL is STATELESS)
    - if you create an inbound rule allowing traffic in, that traffic automatically allowed back out again
   - you can NOT specify deny rules / can NOT block specific IP using Security Groups (cf. NACL can) 
## Using Role with EC2
- Roles are more secure.
- instead of using credentials, Attach the role to the instance
- hackers cannot take access key & secret access key from .aws  
## Using Bootstrap Scripts
- Bootstrap scripts run when an EC2 instance first boots
- automating  infrastructures(software installs and updates)
## MetaData & User Data
- get information about an instance : When You need to know both the private IP address and public IP address of your EC2 instance.
- curl http://169.254.169.254/latest/meta-data/
- curl http://169.254.169.254/latest/user-data/  
## EC2 Placement Groups 
- 3 Placement Groups 
  - **Clustered Placement Group**
    - grouping of instances **within a single AZ**
    - Low **Network** Latency / High **Network** Throughput (put together real close)
    - canNOT span multiple AZ : Cluster Placement Groups can only exist in one Availabiity Zone since they are focused on keeping instances together, which you cannot do across Availability Zones
    - homogenous(same instance types) recommended 
  - **Spread Placement Group**
  - ![ec2-spread_placement_group](https://dasoldasol.github.io/assets/images/image/ec2-spread_placement_group.png)
    - **Indivisual Critical** EC2 instances
    - you can only have max 7 running instances per AZ
    - Spread Placement Groups can be deployed **across availability zones** since they spread the instances further apart.
  - **Partitioned Placement Group**
  - ![ec2-partitioned_placement_group](https://dasoldasol.github.io/assets/images/image/ec2-partitioned_placement_group.png)
    - **Multiple** EC2 instances HDFS, HBase, and Cassendra 
- placement group name must be unique
- can NOT merge placement groups 
- you can move after you stopped instances 

## Elastic Fabric Adapter (EFA)
- a **network device** that you can **attach to your Amazon EC2** instance to **accelerate High Performance Computing (HPC)** and machine learning applications
- achieve the application performance of an on-premises HPC cluster, with the scalability, flexibility, and elasticity
- EFA provides lower and more **consistent latency and higher throughput than the TCP transport** traditionally used in cloud-based HPC systems.
- It enhances the performance of **inter-instance communication** that is critical **for scaling** HPC and machine learning applications.
- **OS-bypass** enables HPC and machine learning applications to bypass the operating system kernel and to **communicate directly with the EFA device.**
  - The **OS-bypass** capabilities of EFAs are **not supported on Windows** instances. If you attach an EFA to a Windows instance, the instance functions as an **Elastic Network Adapter(ENA)**, without the added EFA capabilities.
  - **Elastic Network Adapters (ENAs)** : provide traditional IP networking features that are required to support VPC networking. **EFA**s provide all of the same traditional IP networking features as ENAs, and they also support OS-bypass capabilities. 

## Scenarios 
- **A web application allows customers to upload orders to an s3 bucket. The resulting Amazon S3 events trigger a Lambda function that insets a message to an SQS queues. A single EC2 instance reads messages from the queue, process them, and stores them in a DynamoDB table partitioned by unique order ID. Next month traffic is expected to increase by a factor of 10 and a Solutions Architect is reviewing the architecture for possible scaling problems.    
Which component is MOST likely to need re-architecting to be able to scale to accommodate the new traffic?**
  - **EC2 instance**
  - 단일 EC2 인스턴스는 확장되지 않으며 아키텍처에서 단일 장애 지점입니다.
  - 훨씬 더 나은 솔루션은 2 개의 가용 영역에서 Auto Scaling 그룹의 EC2 인스턴스가 대기열에서 메시지를 읽도록하는 것입니다. 다른 응답은 확장 또는 자동 확장으로 구성 할 수있는 모든 관리 서비스입니다.
  
- You have developed a new web application in the US-West-2 Region that requires six Amazon Elastic Compute Cloud (EC2) instances to be running at all times. US-West-2 comprises three Availability Zones (us-west-2a, us-west-2b, and us-west-2c). You need **100 percent fault tolerance**: should any single Availability Zone in us-west-2 become unavailable, the application must continue to run. How would you **make sure 6 servers are ALWAYS available**? NOTE: each answer has 2 possible deployment configurations. Select the answer that gives TWO satisfactory solutions to this scenario.
  - **Solution 1 : 6 instances / 6 instances / 0 instance**
  - **Solution 2 : 3 instances / 3 instances / 3 intstances**
  - **하나의 AZ를 잃어버린 경우에도** 필요한 수의 실행중인 인스턴스를 제공 할 수있는 각 사례를 조사해야합니다. 힌트 : 항상 잃어버린 AZ가 가장 많은 인스턴스라고 가정하십시오. 클라이언트는 반드시 100 % 내결함성을 갖도록 규정했음을 기억하십시오.

- Your company announced that there would be a surprise IT audit on all of the AWS resources being used in the production environment. During the audit activities, it was noted that you are using a combination of **Standard and Scheduled Reserved EC2 instances** in your applications. They argued that you should have used Spot EC2 instances instead as it is cheaper than the Reserved Instance.    
Which of the following are the characteristics and **benefits** of using these two types of **Reserved EC2 instances**, which you can use as justification? (Choose 2)
  - **Reserved Instances doesn't get interrupted unlike Spot instances in the event that there are not enough unused EC2 instances to meet the demand.**
  - **You can have capacity reservations that recur on a daily, weekly, or monthly basis, with a specified time and duration, for a one-year term through Scheduled Reserved Instances**
  - 예약 인스턴스는 실제 인스턴스가 아니라 계정에서 온 디맨드 인스턴스 사용에 적용되는 청구 할인입니다. 컴퓨팅 변경이 필요할 경우 표준 또는 가변 예약 인스턴스를 수정하고 청구 혜택을 계속 활용할 수 있습니다. 예약 인스턴스의 가용 영역, 범위, 네트워크 플랫폼 또는 인스턴스 크기 (같은 인스턴스 유형 내)를 수정할 수 있습니다. 예약 인스턴스 마켓 플레이스에서 사용하지 않는 인스턴스를 판매 할 수도 있습니다.

- You have launched a new enterprise application with a web server and a database. You are using a large EC2 Instance with one 500 GB EBS volume to host a relational database. Upon checking the performance, it shows that **write throughput to the database needs to be improved**.    
Which of the following is the most suitable configuration to help you achieve this requirement? (Choose 2)
  - **Solution 1 : Increase the size of the EC2 Instance**
  - **Solution 2 : Set up a standard RAID 0 configuration with 2 EBS Volumes**
  - RAID
    - Raid 0 : Striping (하나의 데이터를 여러 드라이브에 분산 저장함으로써 **빠른 입출력**이 가능)
    - Raid 1 : Mirroring (똑같은 데이터를 동일한 용량과 스팩의 다른 디스크에도 저장함으로써 높은 안정성 확보)
  - Setting up the EC2 instance in a placement group : is incorrect배치 그룹 기능은 주로 인스턴스 간 통신에 사용되므로 올바르지 않습니다.

- You are designing a multi-tier web application architecture that consists of a fleet of EC2 instances and an Oracle relational database server. It is required that the database is **highly available** and that you have **full control over its underlying operating system**.    
Which AWS service will you use for your database tier?
  - **A) Amazon EC2 instances with data replication between two different Availability Zones.**
  - Quick Start는 첫 번째 가용 영역의 Amazon EC2 인스턴스에 Oracle 기본 데이터베이스 (Oracle의 사전 구성된 범용 스타터 데이터베이스를 사용)를 배포합니다. 그런 다음 두 번째 가용 영역에 두 번째 EC2 인스턴스를 설정하고`DUPLICATE` 명령을 사용하여 기본 데이터베이스를 두 번째 인스턴스에 복사 한 다음 Oracle Data Guard를 구성합니다.
  - **Amazon RDS and Amazon RDS with Multi-AZ deployments** : are both incorrect. 시나리오에서 데이터베이스 서버의 기본 운영 체제에 액세스해야하므로 Amazon RDS 및 다중 AZ 배포가 포함 된 Amazon RDS가 모두 올바르지 않습니다. Amazon RDS는 관리형 데이터베이스 서비스이므로 당신이 아니라 Amazon이 데이터베이스 인스턴스의 기본 운영 체제를 관리합니다.

- You are managing a suite of applications in your on-premises network which are using trusted IP addresses that your partners and customers have whitelisted in their firewalls. There is a requirement to **migrate these applications** to AWS **without** requiring your partners and customers to **change their IP address whitelists.**      
Which of the following is the most suitable solution to properly migrate your applications?
  - **A) Create a Route Origin Authorization(ROA) then one done, provision and advertise your whitelisted IP address range to your AWS account.**
  - Setting up a list of Elastic IP addresses to map the whitelisted IP address range in your on-premises network :  is incorrect. AWS로 마이그레이션하는 온 프레미스 네트워크의 IP 주소를 VPC의 EIP 주소에 매핑 할 수 없으므로 올바르지 않습니다. 요구 사항을 충족 시키려면 Amazon이 소유한 주소 범위를 광고(advertise)하도록 승인해야합니다.

- You have a requirement to make sure that an On-Demand EC2 instance can only be accessed from this IP address (110.238.98.71) via an **SSH** connection. Which configuration below will satisfy this requirement?
  - **A) Security Group Inbound Rule : Protocol - TCP. Port Range-22, Source 110.238.98.71/32**
  - SSH 프로토콜은 TCP 및 포트 22를 사용합니다. 전체 네트워크가 아닌 클라이언트의 개별 IP 만 허용해야합니다. 따라서 올바른 CIDR 표기법을 사용해야합니다. / 32는 하나의 IP 주소를 나타내고 / 0은 전체 네트워크를 나타냅니다.

- You are a Solutions Architect for a leading Enterprise Resource Planning (ERP) solutions provider and you are instructed to design and set up the architecture of your ERP application in AWS. Your manager instructed you to **avoid using fully-managed AWS services** and instead, only use specific services which allows you to access the underlying operating system for the resource. This is to allow the company to have a much better control of the underlying resources that their systems are using in the AWS cloud.       
Which of the following services should you choose to satisfy this requirement? (Choose 2)
  - **A) EMR, EC2**
  - **Amazon EC2** : 생성 한 인스턴스의 운영 체제에 대한 액세스를 제공합니다.
  - **Amazon EMR** : 동적으로 확장 가능한 Amazon EC2 인스턴스에서 방대한 양의 데이터를 쉽고 빠르고 비용 효율적으로 처리 할 수있는 관리 형 Hadoop 프레임 워크를 제공합니다. Amazon EMR에서 생성 한 EC2 인스턴스의 운영 체제에 액세스 할 수 있습니다.
  - **Amazon Athena, DynamoDB, Amazon Neptune** : are incorrect. 관리되는 서비스이므로 올바르지 않습니다. 즉, AWS가 이러한 데이터베이스에서 사용하는 기본 운영 체제 및 기타 서버 구성을 관리합니다.

- You are working for a software company that has moved a legacy application from an on-premises data center to the cloud. The legacy application **requires a static IP address hard-coded into the backend**, which blocks you from using an Application Load Balancer.    
Which steps would you take to apply **high availability and fault tolerance** to this application **without ELB**? (Choose 2)
  - **Solution 1: Assign an Elastic IP address to the instance**
  - **Solution 2: Write a script that checks the health of the EC2 instance. If the instance stops responding, the script will switch the elastic IP address to a standby EC2 instance.**
  - ![EIP_as_VIP](https://dasoldasol.github.io/assets/images/image/EIP_as_VIP.png)    
  - **Launching the instance using Auto Scaling which will deploy the instance again if it becomes unhealthy** : is incorrect. Auto Scaling 그룹은 고 가용성 및 확장 성을 제공하지만이 시나리오에서는 사용할 수없는 ELB에 여전히 의존합니다. 탄력적 IP 형태 일 수있는 고정 IP 주소가 있어야합니다. EC2 인스턴스 중 하나가 비정상 상태가되면 Auto Scaling 그룹이 확장 될 수 있지만 여전히 Auto Scaling 그룹에 EIP를 직접 할당 할 수는 없습니다. 또한 EC2 인스턴스의 상태뿐만 아니라 애플리케이션의 실제 상태 확인 (포트 사용)을 제공 할 수있는 ELB가 없는 경우 Auto Scaling 그룹에 대해 EC2 인스턴스 상태 확인만 사용할 수 있습니다.

- You work for a leading university as an AWS Infrastructure Engineer and also as a professor to aspiring AWS architects. As a way to familiarize your students with AWS, you gave them a project to host their applications to an EC2 instance. One of your students created an instance to host their online enrollment system project but is having a hard time **connecting to their newly created EC2 instance**. Your students have explored all of the troubleshooting guides by AWS and narrowed it down to login issues.       
Which of the following can you use to **log into an EC2 instance**?
  - **A) Key Pairs**

- Using the EC2 API, you requested 40 m5.large On-Demand EC2 instances in a single Availability Zone. Twenty instances were successfully created but the other 20 requests failed.       
What is the solution for this issue and what is the root cause?
  - **A) For new accounts, there is a soft limit of 20 EC2 instances per region. Submit an Amazon EC2 instance Request Form in order to lift this limit.**
  - ![ec2-instance-request-form](https://dasoldasol.github.io/assets/images/image/ec2-instance-request-form.PNG)

- As a Network Architect developing a food ordering application, you need to retrieve the instance ID, public keys, and public IP address of the EC2 server you made for tagging and grouping the attributes into your internal application running on-premises.    
Which EC2 feature will help you achieve your requirements?
  - **A) Instance metadata**
  - **metadata vs. userdata**
    - **metadata** : 실행중인 인스턴스를 구성하거나 관리하는 데 사용할 수있는 인스턴스 데이터. **인스턴스 ID, 공개 키, 공개 IP 주소**를 얻을 수 있습니다
    - **userdata** : 일반적인 자동 구성 작업을 수행하고 **인스턴스가 시작된 후 스크립트를 실행**합니다.

- You are an AWS Network Engineer working for a utilities provider where you are managing a monolithic application with EC2 instance using a Windows AMI. You want to implement a cost-effective and highly available architecture for your application where you have an exact replica of the Windows server that is in a running state. If the primary instance terminates, you can attach the ENI to the standby secondary instance which allows the traffic flow to resume within a few seconds.    
When it comes to the **ENI attachment to an EC2 instance**, what does **'warm attach'** refer to?
  - **A) attaching an ENI to an instance when it is stopped**
  - **An elastic network interface (ENI)** : ENI는 가상 네트워크 카드를 나타내는 VPC의 논리적 네트워킹 구성 요소입니다. 다음과 같은 방법으로 EC2 인스턴스에 네트워크 인터페이스를 연결할 수 있습니다:
    - When it's **running (hot attach)**
    - When it's **stopped (warm attach)**
    - When the instance is **being launched (cold attach)**.

- You are **unable to connect to your new EC2 instance via SSH from your home computer**, which you have recently deployed. However, you were **able to successfully access other existing instances in your VPC** without any issues.       
Which of the following should you check and possibly correct to restore **connectivity**?
  - **A) Configure the Security Group of the EC2 instance to permit ingress traffic over port 22 from your IP**
  - SSH를 통해 EC2 인스턴스에 연결하는 경우 EC2 인스턴스의 보안 그룹에서 포트 22가 허용되는지 확인해야합니다.
  - **NACL** : is incorrect. 네트워크 ACL은 하나의 EC2 인스턴스가 아니라 전체 VPC로 들어오고 나가는 트래픽을 제어하는 데 매우 적합합니다.
  
- You are working as a Solutions Architect for an aerospace manufacturer which heavily uses AWS. They are running a cluster of multi-tier applications that spans multiple servers for your wind simulation model and how it affects your state-of-the-art wing design. Currently, you are experiencing a slowdown in your applications and upon further investigation, it was discovered that it is due to latency issues.     
Which of the following EC2 features should you use to optimize performance for a **compute cluster that requires low network latency**?
  - **A) Placement Groups**
  - **Multiple Availability Zones** : is incorrect. 다중 가용 영역은 주로 AWS AZ 중 하나가 다운 될 때 고가용성을 달성하는 데 사용되며 낮은 네트워크 지연시간을 위해 사용하지 않습니다. 여러 가용 영역에 대신 스프레드 배치 그룹을 사용하십시오.

- You are working for a large financial firm and you are instructed to set up a Linux bastion host. It will allow access to the Amazon EC2 instances running in their VPC. For security purposes, **only the clients connecting from the corporate external public IP address 175.45.116.100 should have SSH access to the host**.    
Which is the best option that can meet the customer's requirement?
  - **A) Security Group Inbound Rule : Protocol - TCP. Port Rage - 22, Source 175.45.116.100/32**

- You are working for a large financial firm in the country. They have an AWS environment which contains several Reserved EC2 instances hosted in a web application that has been decommissioned last week. To save cost, you need to **stop incurring charges for the Reserved instances** as soon as possible.    
What cost-effective steps will you take in this circumstance? (Choose 2)
  - **A1) Terminate the Reserved instances as soon as possible to avoid getting billed at the on-demand price when it expires.**
  - **A2) Go to the AWS Reserved Instance Marketplace and sell the Reserved instances.**
  - **Stopping the Reserved instances as soon as possible** : is incorrect. 중지 된 인스턴스는 다시 시작될 수 있음.
  
- You are working for a FinTech startup as their AWS Solutions Architect. You deployed an application on different EC2 instances with Elastic IP addresses attached for easy DNS resolution and configuration. These servers are only accessed from 8 AM to 6 PM and can be stopped from 6 PM to 8 AM for cost efficiency using Lambda with the script that automates this based on tags.       
Which of the following will occur **when an EC2-VPC instance with an associated Elastic IP is stopped and started**? (Choose 2) 
  - **A1) All data on the attached instance-store devices will be lost.**
  - **A2) The underlying host for the instance is possibly changed.**
  - EBS 지원 인스턴스 만 중지했다가 다시 시작할 수 있으므로, 시나리오의 인스턴스가 EBS 지원됨(EBS-backed)을 의미합니다. EBS 지원 EC2 인스턴스를 중지 한 경우 볼륨이 유지되지만 연결된 인스턴스 스토어 볼륨의 데이터는 지워집니다. 
  - EC2-Classic 인스턴스인 경우 탄력적 IP 주소가 인스턴스와 연결 해제됩니다. 반면, EC2-VPC 인스턴스인 경우 탄력적 IP 주소는 연결된 상태로 유지됩니다.
  - EBS 지원 EC2 인스턴스에는 인스턴스 스토어 볼륨이 연결되어있을 수 있습니다.

- Your IT Manager instructed you to set up a **bastion host** in the cheapest, most secure way, and that **you should be the only person that can access it via SSH**.      
Which of the following steps would satisfy your IT Manager's request?
  - **A) Set up a small EC2 instance and a security group which only allows access on port 22 via your IP address**
  - **bastion host** 는 인터넷과 같은 외부 네트워크에서 개인 네트워크에 대한 액세스를 제공하는 서버입니다. 요새 공격은 잠재적 공격에 노출되어 있으므로 침투 가능성을 최소화해야합니다.

- The media company that you are working for has a video transcoding application running on Amazon EC2. Each EC2 instance polls a queue to find out which video should be transcoded, and then runs a transcoding process. **If this process is interrupted, the video will be transcoded by another instance based on the queuing system**. This application has a large backlog of videos which need to be transcoded. Your manager would like to reduce this backlog by adding more EC2 instances, however, **these instances are only needed until the backlog is reduced.**    
In this scenario, which type of Amazon EC2 instance is the most cost-effective type to use?
  - **A) Spot instances**
  - 기본 서버가 아니라 예비 컴퓨팅 리소스로 사용될 인스턴스가 필요합니다. 백 로그가 크게 줄어든 후에는 이러한 인스턴스를 종료해야합니다. 현재 프로세스가 중단되면 대기열 시스템을 기반으로 다른 인스턴스에서 비디오를 코드 변환 할 수 있습니다. 이는 애플리케이션이 EC2 인스턴스의 예기치 않은 종료를 정상적으로 처리 할 수 있음을 의미합니다.
  - Amazon EC2 스팟 인스턴스는 온 디맨드 요금에 비해 대폭 할인 된 가격으로 AWS 클라우드에서 여분의 컴퓨팅 용량을 제공합니다. 2018 년 3 월 이후로 스팟 EC2 인스턴스에는 더 이상 "입찰가"가 없습니다. 대신 "최대 가격"을 설정하기 만하면됩니다.

- In Amazon EC2, you can manage your instances from the moment you launch them up to their termination. You can flexibly control your computing costs by changing the EC2 instance state. Which of the following statements is true regarding EC2 billing? (Choose 2)
  - **A1) You will be billed when your Reserved instance is in `terminated` state.**
    - 종료 된 인스턴스에 적용된 예약 인스턴스는 결제 옵션에 따라 기간이 끝날 때까지 청구됩니다.
  - **A2) You will be billed when your On-Demand instance is preparing to hibernate with a `stopping` state**
    - 인스턴스 상태가 '중지'인 경우 중지를 준비중인 경우 요금이 청구되지 않지만 최대 절전 모드를 준비하는 경우 여전히 요금이 청구됩니다.
  - **온 디맨드 인스턴스가 `pending` 상태 인 경우 요금이 청구되지 않습니다*
  - **스팟 인스턴스가 `stopping` 상태로 중지 할 준비가되면 요금이 청구되지 않습니다.**
  - **You will not be billed for any instance usage while an instance is not in the running state** : is incorrect. 인스턴스가 `stopping` 상태로 최대 절전 모드를 준비중인 경우에도 요금이 청구될 수 있습니다.

- You are automating the creation of EC2 instances in your VPC. Hence, you wrote a python script to trigger the Amazon EC2 API to request 50 EC2 instances in a single Availability Zone. However, you noticed that after 20 successful requests, subsequent requests failed.    
What could be a reason for this issue and how would you resolve it?
  - **A) There is a soft limit of 20 instances per region which is why subsequent requests failed. Just submit the limit increase form to AWS and retry the failed requests once approved.**

- A company is using a custom shell script to automate the deployment and management of their EC2 instances. The script is using various AWS CLI commands such as `revoke-security-group-ingress`, `revoke-security-group-egress`, `run-scheduled-instances` and many others.   
In the shell script, what does the **`revoke-security-group-ingress` command do**?
  - **A) Removes one or more ingress rules from a security group**

- You are a Solutions Architect in your company where you are tasked to set up a cloud infrastructure. In the planning, it was discussed that you will need two EC2 instances which should **continuously run for three years**. The CPU utilization of the EC2 instances is also expected to be stable and predictable.    
Which is the most cost-efficient Amazon EC2 Pricing type that is most appropriate for this scenario?
  - **A) Reserved Instances**
  - 예약 인스턴스는 다음에 권장됩니다.
    - 꾸준한 상태 사용 응용 프로그램
    - 예약 용량이 필요할 수있는 응용 프로그램
    - 1 년 또는 3 년 동안 EC2를 사용하여 총 컴퓨팅 비용을 절감할 수 있는 고객

- A company is hosting EC2 instances that are on non-production environment and processing non-priority batch loads, which **can be interrupted at any time.**       
What is the best instance purchasing option which can be applied to your EC2 instances in this case?
  - **A) Spot Instances**

- You are using an On-Demand EC2 instance to host a legacy web application that uses an Amazon **Instance Store-Backed AMI**. The web application should be decommissioned as soon as possible and hence, you need to terminate the EC2 instance.    
When the instance is terminated, what happens to the data on the root volume?
  - **A) Data is automatically deleted**
  - AMI는 Amazon EBS 또는 인스턴스 스토어를 기준으로 분류됩니다.
    - **backed by Amazon EBS** : AMI에서 시작한 인스턴스의 루트 디바이스는 Amazon EBS 스냅 샷에서 생성 된 Amazon EBS 볼륨입니다.
    - **backed by instance store** : AMI에서 시작한 인스턴스의 루트 디바이스는 Amazon S3에 저장된 템플릿에서 생성 된 인스턴스 스토어 볼륨입니다.
  - 인스턴스 스토어 볼륨의 데이터는 인스턴스 수명 동안 만 지속되므로 인스턴스가 종료되면 데이터가 자동으로 삭제됩니다.

- You have a web application hosted in an On-Demand EC2 instance in your VPC. You are creating a shell script that needs the instance's public and private IP addresses.    
What is the best way **to get the instance's associated IP addresses** which your shell script can use?
  - **A) By using a Curl or Get Command to get the latest metadata information from http://169.254.169.254/latest/meta-data/**

- To save costs, your manager instructed you to analyze and review the setup of your AWS cloud infrastructure. You should also provide an estimate of how much your company will pay for all of the AWS resources that they are using. In this scenario, **which of the following will incur costs**? (Select TWO.)
  - **A1) EBS Volumes attached to stopped EC2 Instances.**
  - **A2) A running EC2 Instance**
  - Amazon EC2가 AMI 인스턴스의 부팅 시퀀스를 시작(initiate)할 때 청구가 시작됩니다. 웹 서비스 명령, "shutdown -h"를 실행하거나 인스턴스 실패(failure)를 통해 인스턴스가 종료(terminate)되면 청구가 종료됩니다. 인스턴스를 중지(stop)하면 AWS가 인스턴스를 종료(shut down)하지만 중지된(stopped) 인스턴스 또는 데이터 전송 요금에 대한 시간당 요금은 청구하지 않지만, AWS는 Amazon EBS 볼륨의 스토리지 요금을 청구합니다.
  - **VPC** : VPC 자체 생성 및 사용에 대한 추가 비용은 없습니다.
  - **Public Data Set** : Amazon은 데이터 세트를 무료로 커뮤니티에 저장하고, 컴퓨팅 및 스토리지에 대해서만 비용을 지불합니다.

- A web application requires a **minimum of six** Amazon Elastic Compute Cloud (EC2) instances **running at all times**. You are tasked to deploy the application to **three availability zones** in the EU Ireland region (eu-west-1a, eu-west-1b, and eu-west-1c). It is required that the system is **fault-tolerant up to the loss of one Availability Zone**.    
Which of the following setup is the most cost-effective solution which also maintains the fault-tolerance of your system?
  - **A) 3 instances in eu-west-1a, 3 instances in eu-west-1b, and 3 instances in eu-west-1c**

- You have a distributed application in AWS that **periodically processes** large volumes of data across multiple instances. **You designed the application to recover gracefully from any instance failures**. You are required to launch the application in the most cost-effective way.    
Which type of EC2 instance will meet your requirements?
  - **A) Spot Instances**

- ou are the technical lead of the Cloud Infrastructure team in your company and you were consulted by a software developer regarding the required AWS resources of the web application that he is building. He knows that an Instance Store only provides ephemeral storage where the data is automatically deleted when the instance is terminated. To ensure that the data of his web application persists, the app should be launched in an EC2 instance that has a durable, block-level storage volume attached. He knows that they need to use an EBS volume, but they are not sure what type they need to use.     
In this scenario, which of the following is **true about Amazon EBS volume types** and their respective usage? (Select TWO.)
  - **A1) Provisioned IOPS volumes offer storage with consistent and low-latency performance, and are designed for I/O instensive applications such as large relational or NoSQL databases.**
  - **A2) Magnetic volumes provice the lowest cost per gigabyte of all EBS volume types and are ideal for workloads where data is accessed infrequently, and applications where the lowest storage cost is important**
  - **General Purpose (SSD) is the new, SSD-backed, general purpose EBS volume type that we recommend as the default choice for customers. General Purpose (SSD) volumes are suitable for a broad range of workloads, including small to medium sized databases, development, and test environments, and boot volumes.**

- You have a prototype web application that uses one **Spot EC2 instance**. What will happen to the instance by default if it gets interrupted by Amazon EC2 for capacity requirements?
  - **A) The instance will be terminated**
  - **Spot Instance**
    -스팟 인스턴스는 일반적으로 온 디맨드 가격을 크게 할인합니다.
    -2 분의 알림으로 용량 요구 사항에 따라 Amazon EC2에서 인스턴스를 중단 할 수 있습니다.
    -Spot 가격은 여분의 EC2 용량에 대한 장기 공급 및 수요에 따라 점진적으로 조정됩니다.
  - 중단(interruption)시 스팟 인스턴스를 terminated, stopped 또는 최대 절전 모드(hibernated)로 설정할 수 있습니다. 유지 옵션(**maintain** option)이 활성화(enabled) 된 영구 스팟 요청(persistent Spot requests) 및 스팟 집합(Spot Fleets)에 대해 Stop 및 hibernated 옵션을 사용할 수 있습니다. **By default, your instances are terminated**

- You had recently set up a CloudWatch Alarm that performs status checks on your EBS volume. However, you noticed that the volume check has a status of `insufficient-data`. What does this status mean?
  - **A) The check on the EBS volume is still in progress**
  - **Volume Status Monitoring**
    - 볼륨 상태 확인을 사용하여 Amazon EBS 볼륨에 있는 데이터의 잠재적 불일치를 더 잘 파악, 추적 및 관리할 수 있습니다. 볼륨 상태 확인은 Amazon EBS 볼륨이 손상되었는지 여부를 확인하는 데 필요한 정보를 제공하며, 잠재적으로 일치하지 않는 볼륨을 처리하는 방법을 제어하는 데 도움이 됩니다.
    - **`impaired`** : 볼륨 상태 확인은 5분마다 테스트를 자동으로 실행하여 통과 또는 실패 상태를 반환합니다. 모든 확인을 통과한 경우 볼륨의 상태는 `ok`이고, 확인에 실패한 경우 볼륨의 상태는 `impaired`입니다. Amazon EBS에서 볼륨의 데이터가 잠재적으로 일치하지 않는 것으로 확인하면 데이터 손상을 방지하기 위해 기본적으로 연결된 EC2 인스턴스에서 볼륨으로의 I/O가 비활성화됩니다. I/O가 비활성화되면 다음 볼륨 상태 확인에 실패하고 볼륨 상태는 `impaired`가 됩니다. 
    - **`insufficient-data`** : 볼륨에 대한 확인이 아직 진행 중일 수 있습니다. 볼륨 상태 확인의 결과를 보고 손상된 볼륨을 식별하고 필요한 조치를 취할 수 있습니다.
    - 볼륨 상태는 볼륨 상태 검사 결과를 기준으로 한 것으로, 볼륨 상태를 직접 반영하는 것은 아닙니다. 따라서 볼륨 상태가 `error` 상태의 볼륨을 나타내는 것은 아닙니다(예: 볼륨이 I/O를 허용할 수 없을 때).


- You are required to deploy a Docker-based batch application to your VPC in AWS. The application will be used to process both mission-critical data as well as non-essential batch jobs. Which of the following is the most cost-effective option to use in implementing this architecture? 
  - **A) Use ECS as the container management service then set up a combination of Reserved and Spot EC2 Instances for processing mission-critical and non-essential batch jobs respectively.**
  - Amazon ECS를 사용하면 Amazon EC2 온 디맨드 인스턴스, 예약 인스턴스 또는 스팟 인스턴스에서 관리 형 또는 사용자 지정 스케줄러를 사용하여 배치 워크로드를 실행할 수 있습니다. EC2 인스턴스 조합을 시작하여 워크로드에 따라 비용 효율적인 아키텍처를 설정할 수 있습니다.

- You are building a prototype for a cryptocurrency news website of a small startup. The website will be deployed to a Spot EC2 Linux instance and will use Amazon Aurora as its database. You requested a spot instance at a maximum price of $0.04/hr which has been fulfilled immediately and after 90 minutes, the spot price increases to $0.06/hr and then your instance was terminated by AWS.    
In this scenario, what would be the total cost of running your spot instance?
  - **A) $0.06**
  - $0.04 (60 minutes) + $0.02 (30 minutes) = $0.06
  - Q: 내 스팟 인스턴스가 중지되거나 중단된 경우 요금은 어떻게 청구됩니까?
    - 스팟 인스턴스가 첫 번째 인스턴스 시간에 Amazon EC2에 의해 종료되거나 중단되면 해당 사용에 대해서는 요금이 청구되지 않습니다. 하지만 사용자가 인스턴스를 직접 중지하거나 종료하는 경우 초 단위로 요금이 청구됩니다. 스팟 인스턴스가 이후 사용 시간 중에 Amazon EC2에 의해 종료되거나 중단되면 가장 가까운 초 단위로 올림하여 요금이 청구됩니다. Windows 또는 RHEL(Red Hat Enterprise Linux)에서 실행 중이고, 사용자가 스팟 인스턴스를 직접 중지하거나 종료하는 경우 1시간 전체 요금이 청구됩니다.
  - 스팟 인스턴스는 실행 중 다른 EC2 인스턴스와 똑같이 작동하며 더 이상 필요하지 않으면 종료 될 수 있습니다. 인스턴스를 종료하면 온 디맨드 또는 예약 인스턴스와 마찬가지로 사용 된 부분 시간에 대해 요금을 지불합니다. 그러나 스팟 가격이 최대 가격을 초과하고 Amazon EC2가 스팟 인스턴스를 중단 한 경우 부분 시간 사용에 대해서는 요금이 청구되지 않습니다.
  - 위의 단락은 스팟 인스턴스가 이후 1 시간 안에 Amazon EC2에 의해 종료되거나 중지 된 경우 가장 가까운 초 단위 요금이 청구된다고 공식 EC2 FAQ에서 말한 내용과 모순되는 것처럼 보일 수 있습니다. 따라서 위 단락은 스팟 인스턴스가 첫 번째 인스턴스 시간에만 Amazon EC2에 의해 종료되고 시나리오가 묘사하는 후속 시간 (60 분 이상) 동안이 아닌 경우에만 적용 할 수 있습니다.

- A Junior DevOps Engineer deployed a large EBS-backed EC2 instance to host a NodeJS web app in AWS which was developed by an IT contractor. He properly configured the security group and used a key pair named "tutorialsdojokey" which has a `tutorialsdojokey.pem` private key file. The EC2 instance works as expected and the junior DevOps engineer can connect to it using an SSH connection. The IT contractor was also given the key pair and he has made various changes in the instance as well to the files located in `.ssh` folder to make the NodeJS app work. After a few weeks, the IT contractor and the junior DevOps engineer cannot connect the EC2 instance anymore, even with a valid private key file. They are constantly getting a **"Server refused our key" error even though their private key is valid.**
In this scenario, which one of the following options is a possible reason for this issue?
  - **A1) You're using an SSH private key but the corresponding public key is not in the authorized_keys file**
  - **A2) You don't have permissions for your authorized_key file.**
  - **A3) You don't have permissions for the `.ssh` folder.**
  - **Q. SSH를 사용하여 Amazon Elastic Compute Cloud(Amazon EC2) 인스턴스에 연결할 수 없고 "서버에서 키가 거부됨”이라는 오류 메시지를 받았습니다. 해결하려면 어떻게 해야 합니까?**
  - 다음과 같은 경우 EC2 인스턴스에 로그인하지 못할 수 있습니다.
    - 사용한 SSH 프라이빗 키에 해당하는 퍼블릭 키가 authorized_keys 파일에 없습니다.
    - authorized_keys 파일에 대한 권한이 없습니다.
    - .ssh 폴더에 대한 권한이 없습니다.
    - authorized_keys 파일 또는 .ssh 폴더의 이름이 올바르지 않습니다.
    - authorized_keys 파일 또는 .ssh 폴더가 삭제되었습니다.
    - 인스턴스가 키 없이 시작되었거나 잘못된 키로 시작되었습니다.
  - "서버에서 키가 거부됨” 오류를 수신한 후 EC2 인스턴스에 연결하려면 인스턴스의 사용자 데이터를 업데이트하여 지정된 SSH 퍼블릭 키를 authorized_keys 파일에 추가할 수 있습니다. 그러면 SSH 디렉터리 및 디렉터리의 파일에 대한 적절한 소유권 및 권한이 설정됩니다.
  - 사용중인 개인 키의 파일 권한이 0777 인 경우 "Unprotected Private Key File" 오류가 발생합니다.

- A website is running on an Auto Scaling group of On-Demand EC2 instances which are **abruptly getting terminated** from time to time. To automate the monitoring process, you started to create a simple script which uses the AWS CLI to find the root cause of this issue.     
Which of the following is the most suitable command to use?
  - **A)`aws ec2 describe-instances`**
  - The `describe-instances` command shows the status of the EC2 instances including the recently terminated instances. It also returns a `StateReason` of why the instance was terminated.

- You have EC2 instances running on your VPC. You have both UAT and production EC2 instances running. You want to ensure that **employees who are responsible for the UAT instances don’t have the access to work on the production instances** to minimize security risks.     
Which of the following would be the best way to achieve this?
  - **A) Define the tags on the UAT and production servers and add a condition to the IAM policy which allows access to specific tags.**
  - **UAT(User Acceptance Testing)** : 소프트웨어 테스트 프로세스. 
  - 이 시나리오에서 이 솔루션을 달성하는 가장 좋은 방법은 태그와 IAM 정책의 조합을 사용하는 것입니다. **UAT 및 프로덕션 EC2 인스턴스에서 태그를 정의하고 특정 태그에 대한 액세스를 허용하는 조건을 IAM 정책에 추가** 할 수 있습니다.
  - 태그를 사용하면 목적, 소유자 또는 환경과 같은 다양한 방법으로 AWS 리소스를 분류 할 수 있습니다. 동일한 유형의 리소스가 많은 경우에 유용합니다. 할당 한 태그를 기반으로 특정 리소스를 빠르게 식별 할 수 있습니다.
  - 기본적으로 IAM 사용자에게는 Amazon EC2 리소스를 생성 또는 수정하거나 Amazon EC2 API를 사용하여 작업을 수행 할 권한이 없습니다. (즉, Amazon EC2 콘솔 또는 CLI를 사용하여 그렇게 할 수도 없습니다.) IAM 사용자가 리소스를 생성 또는 수정하고 작업을 수행 할 수 있도록하려면 IAM 사용자에게 특정 리소스 및 API를 사용할 수있는 권한을 부여하는 IAM 정책을 생성해야합니다. 필요한 작업을 수행 한 다음 해당 권한이 필요한 IAM 사용자 또는 그룹에 해당 정책을 연결합니다.

- A company is planning to launch a **High Performance Computing (HPC) cluster** in AWS that does Computational Fluid Dynamics (CFD) simulations. The solution should scale-out their simulation jobs to experiment with more tunable parameters for faster and more accurate results. The cluster is composed of Windows servers hosted on **t3a.medium** EC2 instances. As the Solutions Architect, you should ensure that the architecture provides **higher bandwidth, higher packet per second (PPS) performance, and consistently lower inter-instance latencies**.    
Which is the MOST suitable and cost-effective solution that the Architect should implement to achieve the above requirements?
  - **A) Enable Enhanced Networking with Elastic Network Adapter(ENA) on the Windows EC2 Instances**
  - **향상된 네트워킹(Enhanced Networking)** : 지원되는 인스턴스 유형에서 단일 루트 I/O 가상화(SR-IOV)를 사용하여 고성능 네트워킹 기능을 제공합니다. SR-IOV는 기존 가상 네트워크 인터페이스에 비해 높은 I/O 성능 및 낮은 CPU 사용률을 제공하는 디바이스 가상화 방법입니다. 향상된 네트워킹을 통해 대역폭과 PPS(Packet Per Second) 성능이 높아지고, 인스턴스 간 지연 시간이 지속적으로 낮아집니다. 향상된 네트워킹 사용에 따르는 추가 요금은 없습니다.
  ![ec2-ena](https://dasoldasol.github.io/assets/images/image/ec2-ena.png)
  - **ENA(Elastic Network Adapter)** : Amazon EC2는 ENA (Elastic Network Adapter)를 통해 향상된 네트워킹 기능을 제공합니다. 지원되는 인스턴스 유형에 대해 최대 100Gbps의 네트워크 속도를 지원합니다. ENA (Elastic Network Adapter)는 VPC 네트워킹을 지원하는 데 필요한 기존 IP 네트워킹 기능을 제공합니다.
  - **EFA(Elastic Fabric Adapter)** : EFA (Elastic Fabric Adapter)는 **단순히 기능이 추가 된 ENA** (Elastic Network Adapter)입니다. **추가 OS 바이 패스 기능과 함께 ENA의 모든 기능을 제공**합니다. OS 바이 패스는 HPC 및 머신 러닝 응용 프로그램이 네트워크 인터페이스 하드웨어와 직접 통신하여 지연 시간이 짧고 안정적인 전송 기능을 제공 할 수있는 액세스 모델입니다. **OS 우회는 HPC 및 기계 학습 애플리케이션이 운영 체제 커널을 우회하여 EFA 디바이스와 직접 통신할 수 있도록 합니다.**
  - **EFA와 window 인스턴스** : **EFA의 OS 바이 패스 기능은 Windows 인스턴스에서 지원되지 않습니다**. EFA를 Windows 인스턴스에 연결하면 인스턴스는 EFA 기능이 추가되지 않은 ENA로 작동합니다.
  - **Enhanced Networking with Intel 82599 Virtual Function (VF)** : is incorrect. 네트워킹 기능을 향상시키기 위해 Windows EC2 인스턴스에 Intel 82599 VF (Virtual Function) 인터페이스를 연결할 수 있지만 HPC 클러스터에서 사용되는 t3a.medium 인스턴스 유형을 지원하지 않습니다. (**C3, C4, D2, I2, M4(m4.16xlarge 제외), R3**)
  - **AWS ParallelCluster** : is incorrect. AWS ParallelCluster는 단지 AWS에서 **고성능 컴퓨팅 (HPC) 클러스터를 쉽게 배포하고 관리** 할 수 있는 AWS 지원 오픈 소스 **클러스터 관리 도구**일 뿐입니다. 

- You are running an **EC2 instance store-based instance**. You shut it down and then start the instance. You noticed that the data which you have saved earlier is no longer available.    
What might be the cause of this?
  - **A) The EC2 instance was using instance store volumes, which are ephemeral and only live for the life of the instance.**

- You recently launched a fleet of on-demand EC2 instances to host a massively multiplayer online role-playing game (MMORPG) server in your VPC. The EC2 instances are configured with Auto Scaling and AWS Systems Manager. What can you use to configure your EC2 instances **without having to establish a RDP or SSH connection to each instance**?
  - **A) Run Command**
  - 콘솔에서 Run Command를 사용하여 각 인스턴스에 로그인하지 않고도 인스턴스를 구성 할 수 있습니다.
  - **AWS Systems Manager Run Command**를 통해 관리형 인스턴스의 구성을 원격으로 안전하게 관리할 수 있습니다. *관리형 인스턴스*는 모든 Amazon EC2 인스턴스이거나, Systems Manager용으로 구성된 하이브리드 환경의 온프레미스 머신입니다. Run Command를 사용하면 일반적인 관리 작업을 자동화하고 대규모로 애드혹 구성을 변경할 수 있습니다. **AWS 콘솔, AWS Command Line Interface, AWS Tools for Windows PowerShell 또는 AWS SDK에서 Run Command를 사용**할 수 있습니다. Run Command는 무료로 제공됩니다.

- An automotive company is working on an autonomous vehicle development and deployment project using AWS. The solution requires **High Performance Computing (HPC)** in order to collect, store and manage massive amounts of data as well as to support deep learning frameworks. The **Linux** EC2 instances that will be used **should have a lower latency and higher throughput than the TCP transport** traditionally used in cloud-based HPC systems. It should also enhance the **performance of inter-instance communication** and must include an **OS-bypass** functionality to allow the **HPC to communicate directly with the network interface hardware** to provide low-latency, reliable transport functionality.    
Which of the following is the MOST suitable solution that you should implement to achieve the above requirements?
  - **A) Attach an Elastic Fabric Adapter (EFA) on each Amazon EC2 instance to acclerate High Performance Computing(HPC).**
  - **Elastic Network Adapter (ENA)** : is incorrect because Elastic Network Adapter (ENA) doesn't have OS-bypass capabilities, unlike EFA.
  - **Elastic Network Interface (ENI)** : is incorrect because an Elastic Network Interface (ENI) is simply a logical networking component in a VPC that represents a virtual network card. 
